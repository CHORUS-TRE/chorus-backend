
# USER DOC
branch feat/go

1) install go
2) pull repo
3) requirements
    a) postgres `docker compose -f .devcontainer/docker-compose.yml up -d`
    b) kind `./scripts/create-local-cluster.sh`
4) launch go run 
    `go run cmd/chorus/main.go start | go run cmd/logger/main.go`
5) go to localhost:5000/doc
6) create tenant 
    a) get jwt `TEST_CONFIG_FILE="./configs/dev/chorus.yml" go run --tags=unit ./tests/steward/getadmintoken/main.go`
    b) init tenant 1 in openapi steward service
7) create user
8) login
9) test with get my user


# DEV DOC

## create a service

### Interface
1) create service proto & entity in /api/proto/v1
2) generate protos

### Plug autogenerated server
3) tell the server there is a new service (both grpc and http) in internal/cmd/start.go

### Provider (dependency injection)
4) implement provider in internal/cmd/provider/workbench.go (copy from internal/cmd/provider/workspace.go for instance)

### migrations
5) implement migration in internal/migration/postgres/00003_workbench.sql

### controller
6) implement controller in internal/api/v1/workbench-controller.go
7) implement controller auth middleware in internal/api/v1/middleware/workbench-authorization.go
8) implement converter in 

### model
7) implement model in pkg/workbench/model/workbench.go

### service
8) implement service in pkg/workbench/service/workbench-service.go
9) implement service caching middleware in pkg/workbench/service/middleware/caching.go
10) implement service logging middleware in pkg/workbench/service/middleware/logging.go
11) implement service validation middleware in pkg/workbench/service/middleware/validation.go

### store
12) implement store in pkg/workbench/store/postgres/workbench-storage.go
13) implement store logging middleware in pkg/workbench/store/middleware/logging.go